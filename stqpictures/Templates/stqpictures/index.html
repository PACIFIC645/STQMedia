{% extends 'base.html' %}
{% load static %}

{% block title %}STQ Media | Home{% endblock %}

{% block content %}
  <!-- HERO SECTION with Slider -->
  <section class="py-5 bg-white">
    <div class="container">
      <div id="homepageCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <!-- Slide 1 -->
          <div class="carousel-item active">
            <img src="{% static 'stqpictures/images/stqpictures_slider1.jpg' %}" class="d-block w-100" alt="Slide 1">
          </div>
          <!-- Slide 2 -->
          <div class="carousel-item">
            <img src="{% static 'stqpictures/images/stqpictures_slider2.jpg' %}" class="d-block w-100" alt="Slide 2">
          </div>
          <!-- Slide 3 -->
          <div class="carousel-item">
            <img src="{% static 'stqpictures/images/stqpictures_slider3.jpg' %}" class="d-block w-100" alt="Slide 3">
          </div>
        </div>
        <!-- Carousel Controls -->
        <button class="carousel-control-prev" type="button" data-bs-target="#homepageCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#homepageCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
      <div class="text-center mt-4 border border-light rounded p-3">
        <a href="{% url 'stqpictures:stq_svcfranchise' %}" class="btn btn-primary me-2 mb-2 hover-effect">
          Join the #stq_svcFRANCHISE Competition
        </a>
        <a href="{% url 'stqpictures:music_video' %}" class="btn btn-success mb-2 hover-effect">
          Check out our Music Video Offers
        </a>
      </div>
    </div>
  </section>

  <!-- INTRODUCTION SECTION -->
  <section class="py-5 bg-light">
    <div class="container">
      {% include 'stqpictures/includes/intro_section.html' %}
    </div>
  </section>

  <!-- OUR SERVICES SECTION -->
  <section class="py-5">
    <div class="container">
      <h2 class="text-center mb-4">Our Services</h2>
      
      {% if services %}
        <div class="row g-4">
          {% for service in services %}
            <div class="col-12 col-md-6 col-lg-4">
              <div class="card h-100 shadow-sm hover-effect">
                <div class="card-body d-flex flex-column">
                  <a href="{% url 'stqpictures:service_detail' pk=service.id %}" class="text-decoration-none h5 text-primary hover-text-primary">
                    {{ service.name }}
                  </a>
                  <div class="mt-auto">
                    <button class="btn btn-primary add-to-cart hover-effect" data-item-id="{{ service.id }}" data-item-type="service">
                      Add to Cart
                    </button>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="text-center text-muted">No services available at the moment.</p>
      {% endif %}

      <!-- Departmental Links (temporary hardcoded buttons) -->
      <div class="row mt-5">
          <div class="col-6 col-sm-3 mb-3">
            <a href="{% url 'stqpictures:music_video' %}" class="btn btn-outline-secondary btn-block dept-btn hover-effect">
              Music Video
            </a>
          </div>
          <div class="col-6 col-sm-3 mb-3">
            <a href="javascript:void(0)" class="btn btn-outline-secondary btn-block dept-btn disabled" title="Coming Soon">
              Film Production
            </a>
          </div>
          <div class="col-6 col-sm-3 mb-3">
            <a href="javascript:void(0)" class="btn btn-outline-secondary btn-block dept-btn disabled" title="Coming Soon">
              Events Coverage
            </a>
          </div>
          <div class="col-6 col-sm-3 mb-3">
            <a href="javascript:void(0)" class="btn btn-outline-secondary btn-block dept-btn disabled" title="Coming Soon">
              Location Scouting
            </a>
          </div>
          <div class="col-6 col-sm-3 mb-3">
            <a href="javascript:void(0)" class="btn btn-outline-secondary btn-block dept-btn disabled" title="Coming Soon">
              Photography
            </a>
          </div>
          <div class="col-6 col-sm-3 mb-3">
            <a href="javascript:void(0)" class="btn btn-outline-secondary btn-block dept-btn disabled" title="Coming Soon">
              Publishing
            </a>
          </div>
          <div class="col-6 col-sm-3 mb-3">
            <a href="javascript:void(0)" class="btn btn-outline-secondary btn-block dept-btn disabled" title="Coming Soon">
              Music Production
            </a>
          </div>
          <div class="col-6 col-sm-3 mb-3">
            <a href="javascript:void(0)" class="btn btn-outline-secondary btn-block dept-btn disabled" title="Coming Soon">
              Talent
            </a>
          </div>
      </div>
    </div>
  </section>

  <!-- GALLERY PREVIEW SECTION -->
  <section class="py-5 bg-light">
    <div class="container">
      <h2 class="text-center mb-4">Gallery Preview</h2>
      {% include 'stqpictures/includes/gallery_preview.html' %}
    </div>
  </section>

  <!-- ENHANCED IMAGE GRID LAYOUT -->
  <section class="py-5">
    <div class="container">
      <div class="mb-4">
        <img src="{% static 'stqpictures/images/indexhero_bg.jpg' %}" alt="Featured Work" class="img-fluid rounded shadow hover-scale">
      </div>
      <div class="row g-3">
        {% for image in gallery_images %}
          <div class="col-6 col-md-2">
            <img src="{{ image.url }}" alt="Gallery Image" class="gallery-img img-fluid rounded hover-scale">
          </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <!-- FEATURED PRODUCTS SECTION -->
  <section class="py-5 bg-light">
    <div class="container">
      <h2 class="text-center mb-4">Featured Products</h2>
      {% if products %}
        <div class="row g-4">
          {% for product in products %}
            <div class="col-12 col-md-6 col-lg-4">
              <div class="card h-100 shadow-sm hover-effect">
                <div class="card-body d-flex flex-column">
                  <a href="{% url 'stqpictures:product_detail' pk=product.id %}" class="text-decoration-none h5 text-primary hover-text-primary">
                    {{ product.name }}
                  </a>
                  <div class="mt-auto">
                    <button class="btn btn-primary add-to-cart hover-effect" data-item-id="{{ product.id }}" data-item-type="product">
                      Add to Cart
                    </button>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="text-center text-muted">No products available at the moment.</p>
      {% endif %}
    </div>
  </section>
{% endblock %}
  
{% block extra_js %}
  {{ block.super }}
  <!-- Swiper Bundle JS for the slider -->
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Optional: a passive listener to improve performance (if needed)
      document.addEventListener("touchstart", function() {}, { passive: true });

      // Initialize Swiper once (not per include)
      const swiper = new Swiper('.swiper-container', {
        slidesPerView: 3,
        spaceBetween: 15,
        loop: true,
        autoplay: {
          delay: 2500,
          disableOnInteraction: false
        },
        navigation: {
          nextEl: '#gallery-next',
          prevEl: '#gallery-prev'
        }
      });
      console.log("Swiper initialized successfully.");
    });
  </script>
{% endblock %}